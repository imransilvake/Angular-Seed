<div class="ham-autocomplete-field" *ngIf="control">
	<!-- Label -->
	<label *ngIf="showLabel" [htmlFor]="autocompleteId">{{labelName}}</label>

	<!-- Input -->
	<div
		class="ham-autocomplete-wrapper"
		[class.ham-invalid]="control.invalid && control.touched"
		[class.ham-focused]="autocompleteFocused"
		[class.ham-disabled]="control.disabled">
		<div class="ham-autocomplete">
			<!-- Chips | Multiple Selection -->
			<mat-chip-list
				*ngIf="multipleSelection"
				class="ham-autocomplete-chips">
				<mat-chip
					class="ham-chip"
					*ngFor="let item of selectedItems"
					[removable]="itemRemovable"
					(removed)="removeItem(item.id)">
					{{item.text}}
					<mat-icon matChipRemove *ngIf="itemRemovable">cancel</mat-icon>
				</mat-chip>
			</mat-chip-list>

			<!-- Input | No Multiple Selection -->
			<input
				#inputField
				matInput
				[formControl]="control"
				[matAutocomplete]="auto"
				[id]="autocompleteId"
				[type]="'text'"
				[placeholder]="autocompletePlaceHolder"
				(focus)="autocompleteFocused=true"
				(focusout)="autocompleteFocused=false">

			<!-- Autocomplete -->
			<mat-autocomplete
				#auto="matAutocomplete"
				[displayWith]="displayFn"
				(optionSelected)="multipleSelection && itemSelected($event)">
				<!-- Default -->
				<ng-container *ngIf="autocompleteType === 0">
					<mat-option *ngFor="let item of filteredData | async" [value]="item" [disabled]="item.disabled">
						{{item.text}}
					</mat-option>
				</ng-container>

				<!-- Group -->
				<ng-container *ngIf="autocompleteType === 1">
					<mat-optgroup
						*ngFor="let group of filteredData | async"
						[label]="group.name"
						[disabled]="group.disabled">
						<mat-option *ngFor="let item of group.items" [value]="item">
							{{item.text}}
						</mat-option>
					</mat-optgroup>
				</ng-container>
			</mat-autocomplete>
		</div>
	</div>

	<!-- Error -->
	<mat-error *ngIf="control.invalid && control.touched">
		<ng-container [ngSwitch]="control.errors | FirstKey">
			<p *ngSwitchCase="'required'" i18n="@@Fields_AutoComplete_Error_Required">
				Required field
			</p>
			<p *ngSwitchCase="'invalidOption'" i18n="@@Fields_AutoComplete_Error_Invalid_Option">
				Please select a valid option from the list!
			</p>
			<p *ngSwitchCase="'backendError'">
				Invalid Field!
			</p>
			<p i18n="@@Fields_AutoComplete_Error_Default" *ngSwitchDefault>
				Unknown error occurred
			</p>
		</ng-container>
	</mat-error>

	<!-- Hint -->
	<mat-hint *ngIf="showHint && hintText">{{hintText}}</mat-hint>
</div>
