<div class="ham-notification-menu">
	<button
		class="ham-btn-icon"
		mat-button
		[matMenuTriggerFor]="menu"
		(onMenuOpen)="onNotificationMenuOpen()">
		<mat-icon>notifications_none</mat-icon>
		<app-badge [type]="2" [count]="totalNotifications"></app-badge>
	</button>
	<mat-menu #menu="matMenu" class="ham-notification-mat-menu">
		<div class="ham-head-1" (click)="onClickStopPropagation($event)">
			<h6 class="ham-title">Notifications</h6>
			<app-badge [type]="1" [count]="totalNotifications"></app-badge>
		</div>
		<app-divider></app-divider>
		<button mat-menu-item *ngFor="let notification of notificationsList && notificationsList.data">
			<div class="cd-row">
				<div class="cd-col cd-col-pm-m-5 cd-col-pm-s-5">
					<p class="ham-ellipses" *ngIf="notification.Message && notification.Message.Title">
						{{ notification.Message.Title }}
					</p>
					<p
						i18n="@@Notification_Message_Title"
						class="ham-ellipses"
						*ngIf="!(!!notification.Message.Title)">
						New registration: {{ notification.SendUser }}
					</p>
				</div>
				<div class="cd-col cd-col-pm-m-3 cd-col-pm-s-3">
					<p
						class="ham-ellipses ham-type"
						[ngStyle]="{ 'background-color' : notification && notification.Message && notification.Message.Colour }"
						[class.ham-blue]="notification.Type === 'REG'"
						[class.ham-repair]="notification.Type === 'REPAIR'"
						[class.ham-alert]="notification.Type === 'ALERT'">
						{{ notification.Type }}
					</p>
				</div>
				<div class="cd-col cd-col-pm-m-4 cd-col-pm-s-4">
					<p class="ham-ellipses ham-time">{{ getUTCToFromNow(notification.Received) }}</p>
				</div>
			</div>
		</button>
		<button
			*ngIf="notificationsList && notificationsList.total >= 5"
			mat-menu-item
			type="button"
			[routerLink]="['/' + routing.notifications.routes.overview]"
			[routerLinkActive]="['ham-active']">
			<mat-icon class="ham-icon">more_horiz</mat-icon>
		</button>
	</mat-menu>
</div>
