<div class="ham-hotel-app ham-margin-top">
	<form [formGroup]="formFields" (ngSubmit)="onSubmitForm()" (keyup.enter)="isFormValid && onSubmitForm()">
		<div class="ham-form" *ngIf="modulesList">
			<!-- Columns -->
			<div class="ham-row ham-border ham-columns" [class.ham-no-license]="!licenseActive">
				<h6 i18n="@@Management_Client_HSA_Column_License" *ngIf="licenseActive">License</h6>
				<h6 i18n="@@Management_Client_HSA_Column_Active">Active</h6>
				<h6 i18n="@@Management_Client_HSA_Column_Module">Module</h6>
				<h6 i18n="@@Management_Client_HSA_Column_Description">Description</h6>
				<h6></h6>
			</div>

			<!-- Details -->
			<div class="ham-details">
				<ng-container *ngFor="let block of modulesList; let mIndex=index;">
					<div class="ham-blocks ham-hotel-room">
						<div class="ham-row ham-columns" [class.ham-no-license]="!licenseActive" *ngFor="let module of block['modules']; let iIndex=index;">
							<!-- License -->
							<div class="ham-license" *ngIf="licenseActive">
								<mat-slide-toggle
									class="mat-slide-toggle-1"
									(change)="onChangeLicense(mIndex, iIndex)"
									[formControl]="modules.controls[getModuleIndex(mIndex, iIndex)].get('Licensed')">
								</mat-slide-toggle>
							</div>

							<!-- Active -->
							<div class="ham-active">
								<mat-slide-toggle
									class="mat-slide-toggle-1"
									[formControl]="modules.controls[getModuleIndex(mIndex, iIndex)].get('Active')">
								</mat-slide-toggle>
							</div>

							<!-- Title -->
							<div class="ham-title"><p>{{ module.details.title }}</p></div>

							<!-- Description -->
							<div class="ham-desc"><p>{{ module.details.description }}</p></div>

							<!-- Params -->
							<div class="ham-params">
								<p i18n="@@Management_Client_HSA_Form_Params"
								   (click)="onClickOpenParamsModal(getModuleIndex(mIndex, iIndex))">
									Params
								</p>
							</div>
						</div>
					</div>
				</ng-container>
			</div>
		</div>

		<!-- Empty -->
		<ng-container *ngIf="!modulesList">
			<app-divider></app-divider>
			<div class="ham-no-module cd-center-align">
				<p i18n="@@Management_Client_Form_No_module_Available">No Module available!</p>
			</div>
		</ng-container>

		<app-divider></app-divider>

		<!-- Button -->
		<div class="cd-row ham-padding-1 ham-buttons cd-right-align">
			<div class="cd-col">
				<button
					mat-button
					type="button"
					class="ham-button ham-button-1"
					(click)="onClickCloseClientForm()"
					i18n="@@Management_Client_HSA_Form_Cancel_Button">Cancel
				</button>
				<button
					mat-button
					type="submit"
					class="ham-button ham-button-1"
					[disabled]="!isFormValid"
					i18n="@@Management_Client_HSA_Form_Save_Button">Save
				</button>
			</div>
		</div>
	</form>
</div>
